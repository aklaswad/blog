+++
date = "2023-01-28T08:01:51"
title = "Blogを復活させた"
+++

昨年くらいに、流石に放置したままのMTがまずいなと思って（セキュリティ的にもVPSのマネー的にも）いったんコンテンツだけ確保してVPSを解約した。

このままで消え去れば良いかとも思ってたが、ふと思い直してコンテンツだけでもGitHub Pagesにでもあげておくかと静的サイトジェネレータで適当にビルドしてアップした。Hugoというのが良いらしのでそれで。コンバートにはDQNEOさんの[これ](http://dqn.sakusakutto.jp/2015/06/movabletype2hugo.html)をお借りして、少し手直しして適用した。
ざーっとコード見て、`blog_id`を確認しないととか改行の扱いも追加しなきゃとか動かす前から気づく程度にはMTのこと覚えてた自分にちょっと感心した。

staticのファイルはどうしたものかなあ。まあ、殆ど使ってなかったはずだからうっちゃっていいかなと。

ローカルにはMySQLもまともなPerlも入ってないので、MTのデータ取ってくるためにコンテナでMySQL立てて、ダンプ流し込んで、書き出し作業もコンテナのPerlから行って、GitHub Pagesが全然知らない人になってて驚いたり、半日くらいでの作業でとりあえず見れるようになった。使ってるドメイン管理の会社のUIがひどくて、DNSの切り替えが一番大変だった。

------

この構造なら、今作ってる[aclii](https://github.com/aklaswad/aclii)とも相性が良いので、そっちとも繋げてみた。
個人作業用のスクリプトを`ii`というコマンドでまとめて使っているので、ターミナルからならどこからでも`ii blog`で記事のテンプレートをvimで開いて、draftフラグを消して保存すれば勝手にgithubにpushして、あとはGitHub Actionsがパブリッシュまでしてくれるようにした。試してないけどちゃんと動くはず。[^1]

これで快適に書けるようなら、またほそぼそと遊ぼうかな。


[^1]: (追記：一発では動きませんでした。git コマンド叩くならcdしないと駄目でした。ひーん。）
