+++
mt_entry_id = 514
date = "2012-12-15T13:36:33+09:00"
title = "When and where my laptop was running?"
categories = []

+++

勤怠表提出の自動化などが目的で、持ち歩いているラップトップのWi-Fiの接続先をログに取るようにしていたのだが、結構ログが溜まってきたので視覚化してみた。<br />
<br />
<ul><li><a href="http://aklaswad.com/where.html" target="_blank" title="When and where my laptop was running?">http://aklaswad.com/where.html</a></li></ul><br />
<br />
OSXでは接続しているSSIDなどの情報は以下のコマンドで取得できる。<br />
<pre><code>/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport -I</code></pre><br />
この結果をパースして、SSIDに変化があったらファイルに追記するという簡単なperlスクリプトを、cronでぶん回しているだけ。接続先のSSIDのバリエーションなどはたかが知れているので、SSIDに対応した処理も行える。自分は、日付が変わってから最初にオフィスのネットワークに接続したらfoursquareでチェックインするようにしてる。<ins>のでスクリプトに直接APIKeyなど書いてあるので公開しません;)</ins><br />
<br />
今回は、ログファイルをパースして、グラフっぽいHTMLを書き出してみた。これもcronで一日一回生成してscpでサーバーに投げるようにした。オフィスのネットワークやモバイル(wimax/iPhone)など接続先にあわせて色分けしたので、時期や季節によって行動パターンが違うのがわかって面白いと思う。寒くなると冬眠するがごとく活動時間が短くなっている様がよくわかりますね(震え声<br />
<br />
ちなみに2011年3月の空白期間は、ラップトップのロジックボードがやられて起動不能だった+修理期間で、地震は直接の原因ではなかったりする。<br />
<br />
<br />
<br />
<br />
