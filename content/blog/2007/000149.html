+++
mt_entry_id = 149
date = "2007-06-22T01:40:00+09:00"
title = "MT4Beta : TimeTypeの投稿を別ブログにして新機能のaggregationを使って引っ張ってみた"
categories = []

+++

ちょっと<a href="http://blog.aklaswad.com/mtplugins/timetype.html">TimeType</a>の投稿が多すぎて、自分の投稿が埋もれてしまう感じだったので、別ブログに投稿先を変更しました。
自動投稿に負けないように毎日記事を書け、というツッコミは無しの方向でお願いします。
それでもって、折角のプラグインの表示が無くなっちゃうというのも寂しいので、MT4の新機能のcross-blog aggregationを使って、サイドバーに最新の数件の投稿を表示するようにしてみました。これですね。

<a href="http://www.movabletype.org/2007/06/10_features_that_help_make_you.html">10 Features that Help Make You a Better Blogger and Publisher - movabletype.org</a>
<blockquote>#  Built-in cross-blog aggregation: Publish pages that include data from some, all, or just one of your blogs </blockquote>

で、cross-blog aggregationの実際の利用方法なのですが、MTEntriesなどのタグのアトリビュートに、展開したいブログのidを指定すれば、指定したブログの内容が表示出来るようです。
<!--more-->アトリビュートとしては、

<ul>
	<li>blog_ids</li>
	<li>include_blogs</li>
	<li>exclude_blogs</li>
</ul>

といったものが使えるみたいです。カンマ区切りでの複数指定、Allなどの指定方法があるようですが、詳しくは試していないのでちょっとわかりません。
Context.pmのset_blog_load_contextルーチンがブログのaggregation指定を実行している模様なので、詳細はコード読んでください。ビール飲んだら正規表現が分からなくなりましたので僕は読めません;-)

で、このblog_idsというやつを使って以下のような記述のwidgetを作成し、別ブログに投稿されているTimeTypeのエントリーをサイドバーに表示してみました。

<pre class=&quot;code&quot;>
&lt;div class=&quot;module-categories module&quot;&gt;
   &lt;h2 class=&quot;module-header&quot;&gt;&lt;a href=&quot;http://blog.aklaswad.com/mytimelog/&quot;&gt;MyTimeLog&lt;/a&gt;&lt;/h2&gt;
   &lt;div class=&quot;module-content&quot;&gt;
      &lt;ul class=&quot;module-list&quot;&gt;
      &lt;MTEntries blog_ids=&quot;5&quot; lastn=&quot;3&quot;&gt;
         &lt;li class=&quot;module-list-item&quot;&gt;&lt;h2&gt;&lt;$MTEntryTitle$&gt;&lt;/h2&gt;&lt;$MTEntryBody$&gt;&lt;/li&gt;
      &lt;/MTEntries&gt;
      &lt;/ul&gt;
      see detail at &lt;a href=&quot;http://aklaswad.timelog.jp/&quot;&gt;my timelog page&lt;/a&gt;&lt;br /&gt;
      &lt;a href=&quot;http://timelog.jp&quot;&gt;logged by Timelog&lt;/a&gt;
   &lt;/div&gt;
&lt;/div&gt;
</pre>

なかなかうまい事できたと思います。いえーい。