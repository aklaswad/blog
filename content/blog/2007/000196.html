+++
mt_entry_id = 196
date = "2007-08-11T12:19:34+09:00"
title = "CustomEditorButton"
categories = ["mtplugins"]

+++

<ins datetime="2008-03-02T15:34:59+09:00">MT4に対応した<a href="http://blog.aklaswad.com/mtplugins/customeditorbutton2.html">CustomEditorButton2</a>を公開しました!</ins>

<img alt="CustomEditorButton_fig2.png" src="http://blog.aklaswad.com/CustomEditorButton_fig2.png" width="122" height="95" class="mt-image-left" style="float: left; margin: 0 20px 20px 0;"/>

数行のjavascriptを記述するだけで、エントリー画面のボタンを自作できるプラグインです。

作成から利用までの流れは、<a href="http://blog.aklaswad.com/movable_type/plugins/customeditorbutton/newbuttontutorial.html">動作イメージのムービー</a>をご覧ください。

<!--more--><h3>動作環境</h3>

Movable Type 3.3 専用のプラグインです。他のバージョンでは動作しません。

<h3>インストール</h3>
ファイルをダウンロード、解凍したら、お使いのMovable Typeのディレクトリに上書きする形でアップロードしてください。「mt-static」を移動している場合や、上書きが不安な場合は、以下の2箇所にファイルをアップロードしてください。
<ul><li>解凍したディレクトリの「plugins/CustomEditorButton」を、お使いのMovable Typeの「plugins」ディレクトリに</li><li>解凍したディレクトリの「mt-static/plugins/CustomEditorButton」を、お使いのMovable Typeの「mt-static/plugins」ディレクトリに</li></ul>

<h3>ボタンの作成</h3>

新規にボタンを追加する場合、以下の項目を設定します。

<ul>
    <li>name: ボタンの名前です。</li>
    <li>表示文字: ボタンの表示に使用される文字を指定します。ボタンの表示用の画像が設定されている場合は、この項目は使用されません。</li><li>画像へのURL: ボタンのイメージに画像を使用する場合、アップロードした画像のurlをここに指定してください。現在の仕様では、ボタン外側の枠は自動的に提供されます。ボタンの中身だけの画像を用意してください。</li>
    <li>説明: ボタンの説明を入力します。</li>
    <li>コード: 後述のように、ボタンの動作をjavascriptで記述してください。</li></ul>

<h3>コード</h3>

javascriptでボタンの動作を定義します。
ここに書かれたjavascriptのコードは、関数の中に自動的に展開されるので、必要な動作の内容だけを記述するだけですみます。
現在の仕様では、エディター画面で範囲選択がされている場合にのみ、選択範囲が「str」という変数に代入されて、このコードが実行されます。
str変数に処理結果を代入することで、選択範囲に処理が反映されます。
例えば、選択範囲を「div」タグで囲む場合は、以下の一行をコード欄に入力します。
<pre class="code">str = '&lt;div&gt;' + str + '&lt;/div&gt;';</pre>

なお、別途宣言済みの変数「txt」に値を代入すると、textareaの全体をtxtで置き換えます。

<h3>個人用の設定</h3>

<img alt="CustomEditorButton_fig3.png" src="http://blog.aklaswad.com/CustomEditorButton_fig3.png" width="263" height="60" class="mt-image-center" style="text-align: center; display: block; margin: 0 auto 20px;"/>

各投稿者は、システムにインストールされているボタンの中から、好きなものを選択して使用できます。
画面の右上のログアウトの隣に、「My Button」メニューが追加されていますので、クリックして個人のボタン設定画面にすすんでください。
画面上段が、現在利用する設定となっているボタンの一覧です。利用したいボタンが下段にある場合、ドラッグ&ドロップで上段に放り込んでください。並び順もそのまま適用されます。

<h3>最新版のダウンロード</h3>

CustomEditorButton 0.23
<a href="http://blog.aklaswad.com/CustomEditorButton_20070227.tar.gz">CustomEditorButton_20070227.tar.gz</a>
<a href="http://blog.aklaswad.com/CustomEditorButton_20070227.zip">CustomEditorButton_20070227.zip</a>




